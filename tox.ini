[tox]
distshare={homedir}/.tox/distshare
envlist=py26,py27,py31,py27-xdist,py25,py24

[tox:hudson]
distshare={toxworkdir}/distshare
sdistsrc={distshare}/pytest-*

[testenv]
changedir=testing
commands=
  py.test -rfsxX --junitxml={envlogdir}/junit-{envname}.xml []
deps=
    {distshare}/pylib-*
    pexpect
    nose

[testenv:py27-xdist]
basepython=python2.7
deps=
    {distshare}/pylib-*
    {distshare}/pytest-xdist-*
commands=
  py.test -n3 -rfsxX \
        --junitxml={envlogdir}/junit-{envname}.xml []

[testenv:allplugins]
deps=
    pytest-xdist-*
    pytest-xdist-*

[testenv:py26]
basepython=python2.6
[testenv:doc]
basepython=python
changedir=doc
deps=sphinx
     {distshare}/pylib-*
     {distshare}/pytest-xdist-*

commands=
    make html

[testenv:py31]
deps= {distshare}/pylib-*

[testenv:py32]
deps= {distshare}/pylib-*

#{distshare}/pytest-xdist-*
#[testenv:pypy]
#python=pypy-c
[testenv:jython]
changedir=testing
basepython=jython
commands=
    {envpython} {envbindir}/py.test-jython \
        -rfsxX --junitxml={envlogdir}/junit-{envname}1.xml [io_ code]
    {envpython} {envbindir}/py.test-jython \
        -rfsxX --junitxml={envlogdir}/junit-{envname}2.xml acceptance_test.py plugin
